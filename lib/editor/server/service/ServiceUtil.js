/*! letrest - v0.3.7 - 2017-02-09 */var MODULE="SERVICE UTIL Service | ",LOG=require("uw").log,moment=require("moment"),fs=require("fs"),mkdirSync=function(a){try{fs.mkdirSync(a)}catch(a){if("EEXIST"!=a.code)throw a}},createFolder=function(a){var b=a+"/back",c=b+"/"+moment().format("YYYYMMDD");return mkdirSync(b),mkdirSync(c),c};module.exports.saveWithBackup=function(a,b,c,d,e){var f=e||".json";if(!a)return-1;var g=a;LOG.info(MODULE,d+g+f);try{var h=createFolder(c),i=c+"/"+g+f;if(fs.existsSync(i)){var j=h+"/"+g+"_"+moment().format("hhmmss")+f;fs.renameSync(i,j)}var b=".js"===f?JSON.parse(JSON.stringify(b,null,"\t")):JSON.stringify(b,null,"\t");return fs.writeFileSync(i,b),LOG.info(MODULE,"SAVED SUCCESSFULLY"),0}catch(a){return LOG.error(MODULE,d+g),-1}};
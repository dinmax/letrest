/*! letrest - v0.3.2 - 2016-06-07 */var MODULE="SERVICE UTIL Service | ",LOG=require("uw").log,moment=require("moment"),fs=require("fs"),mkdirSync=function(a){try{fs.mkdirSync(a)}catch(b){if("EEXIST"!=b.code)throw b}},createFolder=function(a){var b=a+"/back",c=b+"/"+moment().format("YYYYMMDD");return mkdirSync(b),mkdirSync(c),c};module.exports.saveWithBackup=function(a,b,c,d,e){var f=e||".json";if(!a)return-1;var g=a;LOG.info(MODULE,d+g+f);try{var h=createFolder(c),i=c+"/"+g+f;if(fs.existsSync(i)){var j=h+"/"+g+"_"+moment().format("hhmmss")+f;fs.renameSync(i,j)}var b=".js"===f?JSON.parse(JSON.stringify(b,null,"	")):JSON.stringify(b,null,"	");return fs.writeFileSync(i,b),LOG.info(MODULE,"SAVED SUCCESSFULLY"),0}catch(k){return LOG.error(MODULE,d+g),-1}};
/*! letrest - v0.0.38 - 2016-04-04 */var MODULE="SERVICE UTIL Service | ",LOG=require("uw").log,moment=require("moment"),fs=require("fs"),mkdirSync=function(a){try{fs.mkdirSync(a)}catch(b){if("EEXIST"!=b.code)throw b}},createFolder=function(a){var b=a+"/back",c=b+"/"+moment().format("YYYYMMDD");return mkdirSync(b),mkdirSync(c),c};module.exports.saveWithBackup=function(a,b,c,d,e){var f=e||".json";if(a){var g=a;LOG.info(MODULE,d+g);var h=createFolder(c),i=c+"/"+g+f;if(fs.existsSync(i)){var j=h+"/"+g+"_"+moment().format("hhmmss")+f;fs.rename(i,j)}var b=".js"===f?JSON.parse(JSON.stringify(b,null,"	")):JSON.stringify(b,null,"	");return fs.writeFileSync(i,b)}return-1};